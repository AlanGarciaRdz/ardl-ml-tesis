// Clear Firebase Auth IndexedDB
(async () => {
    const databases = await indexedDB.databases();
    databases.forEach(db => {
      if (db.name && db.name.includes('firebase')) {
        indexedDB.deleteDatabase(db.name);
        console.log(`Deleted: ${db.name}`);
      }
    });
    console.log('âœ… Firebase IndexedDB cleared. Please refresh the page.');
  })();

  firebase rules_version

  rules_version = '2';

  service cloud.firestore {
    match /databases/{database}/documents {
      match /users/{userId} {
        // Allow users to read their own document
        allow read: if request.auth != null && request.auth.uid == userId;
        
        // Allow users to create their own document (first time registration)
        allow create: if request.auth != null && request.auth.uid == userId;
        
        // Allow users to update their own document
        allow update: if request.auth != null && request.auth.uid == userId;
        
        // Alternatively, you can use 'write' which covers both create and update:
        // allow write: if request.auth != null && request.auth.uid == userId;
      }
    }
  }